<style>
    #addCart {
        background-color: aqua;
    }
</style>

<body>
    <section class="product-details spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6">
                    <div class="product__details__pic">
                        <% if(productFile.length != 0){ %>
                        <div class="product__details__pic__item">
                            <img class="product__details__pic__item--large" src="../../<%=productFile[0].FILE_ROUTE%>"
                                alt="">
                        </div>            
                        <div class="product__details__pic__slider owl-carousel">
                            <% for(i=0; i< productFile.length; i++){%>
                            <img data-imgbigurl="../../<%=productFile[i].FILE_ROUTE%>"
                                src="../../<%=productFile[i].FILE_ROUTE%>" alt="">
                            <%}%>
                        </div>
                        <%} else{%>
                            <div class="product__details__pic__item">
                                <img class="product__details__pic__item--large" src="../../<%=productDetail[0].PRODUCT_IMG%>"
                                    alt="">
                            </div>  
                            <%}%>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="product__details__text">
                    <h3><%=productDetail[0].PRODUCT_NAME%></h3>
                            <div class="product__details__price"><%=productDetail[0].PRODUCT_PRICE%></div>
                            <%-productDetail[0].PRODUCT_DETAIL%>
                            <p>남은수량 : <%=productDetail[0].PRODUCT_COUNT%></p>
                            <div class="product__details__quantity">
                                <input type='button' onclick='count("plus")' value='+' />
                                <input type='text' id='result' value='0'>
                                <input type='button' onclick='count("minus")' value='-' />
                            </div>
                            <button class="primary-btn" id="addCart" onclick="addCart('<%=productDetail[0].PRODUCT_ID%>')">장바구니 담기</button>
                            <button class="primary-btn" onclick="buyProduct()">구매하기</button>
                            <ul>
                                <li><b>Availability</b> <span>In Stock</span></li>
                                <li><b>Shipping</b> <span>01 day shipping. <samp>Free pickup today</samp></span></li>
                                <li><b>Weight</b> <span>0.5 kg</span></li>
                                <li><b>Share on</b>
                                    <div class="share">
                                        <a href="#"><i class="fa fa-facebook"></i></a>
                                        <a href="#"><i class="fa fa-twitter"></i></a>
                                        <a href="#"><i class="fa fa-instagram"></i></a>
                                        <a href="#"><i class="fa fa-pinterest"></i></a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="product__details__tab">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#tabs-1" role="tab"
                                        aria-selected="true">Description</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#tabs-2" role="tab"
                                        aria-selected="false">Information</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#tabs-3" role="tab"
                                        aria-selected="false">Reviews <span>(1)</span></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
    </section>
</body>
<script>
    function addCart(productId) {
        var count = document.getElementById('result').value
        fetch("/user/insertCart", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    productId: productId,
                    count: document.getElementById('result').value,
                }),
            })
            .then((response) => response.json())
            .then(function (data) {
                alert('상품이 장바구니에 담겼습니다.')
            });
    }

    function count(type)  {
        // 결과를 표시할 element
        const resultElement = document.getElementById('result');
        
        // 현재 화면에 표시된 값
        let number = resultElement.value;
        
        // 더하기/빼기
        if(type === 'plus') {
            number = parseInt(number) + 1;
        }else if(type === 'minus')  {
            number = parseInt(number) - 1;
        }
        
        // 결과 출력
        resultElement.value = number;
    }
</script>